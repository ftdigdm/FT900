# FT900 Alexa Demo


This PoC application demonstrates using FT900 microcontroller as an Amazon Echo Dot device, where users can issue voice commands to Alexa and hear Alexa’s voice responses generated by Alexa’s complex speech recognition and natural language processing in the cloud. To make this possible, FT900 (Alexa client) communicates with a Raspberry PI 3B+ (Alexa gateway), which relays voice requests and voice responses to and from the Alexa cloud. The RPI runs a customized version of Amazon’s official open-source Alexa Voice Service (AVS) SDK, written in C++.

![](https://github.com/richmondu/FT900/blob/master/Alexa/Amazon%20Alexa%20Client/docs/images/system_diagram.jpg)

This demo is targeted for FTDI/Bridgetek’s smart home devices, PanL Hub and PanL Display. Having Alexa built-in to PanL products allow customers to talk directly to Alexa via PanL without needing to buy Amazon Echo devices. PanL Hub, which runs on RPI, acts as the Alexa Gateway while the PanL Display, which runs on FT900 microcontroller, acts as the Alexa Client. Customers will be able to use both PanL Hub and PanL Display to issue voice commands and operations to Alexa.


### FT900-side (Alexa Client)

![](https://github.com/richmondu/FT900/blob/master/Alexa/Amazon%20Alexa%20Client/docs/images/block_diagram.jpg)


Below is a sequence diagram showing the basic interaction of components of the FT900 application.

![](https://github.com/richmondu/FT900/blob/master/Alexa/Amazon%20Alexa%20Client/docs/images/sequence_diagram.jpg)


Below is a description of how the audio is processed on FT900.

avs_record_request()
- Audio recorded (from mic): 16-bit PCM, 16KHZ, stereo (2-channels)
- Audio saved (to SD card): 16-bit PCM, 16KHZ, mono (1-channel)

avs_send_request()
- Audio read (from SD card): 16-bit PCM, 16KHZ, mono (1-channel)
- Audio sent (to RPI):  8-bit u-law, 16KHZ, mono (1-channel)

avs_recv_response()
- Audio received (from RPI): 8-bit u-law, 16KHZ, mono (1-channel)
- Audio saved (to SD card): 16-bit PCM, 16KHZ, mono (1-channel)

avs_play_response()
- Audio read (from SD card): 16-bit PCM, 16KHZ, mono (1-channel)
- Audio played (to speaker): 16-bit PCM, 16KHZ, stereo (2-channels)



### RPI-side (Alexa Gateway)

![](https://github.com/richmondu/FT900/blob/master/Alexa/Amazon%20Alexa%20Client/docs/images/block_diagram_rpi.jpg)


Below is a sequence diagram showing the basic interaction of components of the RPI application.

![](https://github.com/richmondu/FT900/blob/master/Alexa/Amazon%20Alexa%20Client/docs/images/sequence_diagram_rpi.jpg)


Below is a description of how the audio is processed on RPI.

avs_request()
- Audio received (from FT900): 8-bit u-law, 16KHZ, mono (1-channel)
- Audio sent (to Alexa cloud): 16-bit PCM, 16KHZ, mono (1-channel)

avs_response()
- Audio received (from Alexa cloud): MP3
- Audio sent (to FT900): 8-bit u-law, 16KHZ, mono (1-channel)
